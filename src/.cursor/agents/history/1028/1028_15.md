ì§ˆë¬¸ (ì›ë³¸):
2025-10-28

ì§ˆë¬¸: @# King - ê±´ë¬¼ì£¼ (Building Owner) 
**êµ¬í˜„í•´** í…ŒìŠ¤íŠ¸ì½”ë“œë¥¼ ì‘ì„±í•´ì¤˜.
ë°˜ë³µìœ í˜•ì„ ì„ íƒí–ˆë‹¤ë©´ ë§¤ì¼,ë§¤ì£¼,ë§¤ì›”,ë§¤ë…„ì—ì— ë°˜ë³µë“±ë¡ë˜ê¸°ìœ„í•´ í…ŒìŠ¤íŠ¸í•´ì•¼í•˜ëŠ” ê²ƒì„ 
describeì€ ë°˜ë³µì¼ì •ìœ¼ë¡œì§€ì •í•œê³  ê·¸ì•ˆì— it('ì„¤ëª…',() =>{}) ê°™ì€ ë°©ì‹ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•´ì•¼í•˜ëŠ” ê²ƒë“¤ì„ ë§Œë“¤ì–´ì¤˜.

ë‹µë³€:
ê±´ë¬¼ì£¼ë¡œì„œ ë°˜ë³µ ì¼ì • ê¸°ëŠ¥ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ TDD ë°©ì‹ìœ¼ë¡œ ì‘ì„± ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

## âœ… TDD ì‚¬ì´í´ ì™„ë£Œ: Red â†’ Green â†’ Refactor

### Red ë‹¨ê³„ (í…ŒìŠ¤íŠ¸ ì‘ì„±)

**íŒŒì¼**: `src/__tests__/unit/medium.recurringEvents.spec.ts`

**í…ŒìŠ¤íŠ¸ êµ¬ì¡°**:
```typescript
describe('ë°˜ë³µì¼ì • >', () => {
  describe('ë§¤ì¼ ë°˜ë³µ', () => { ... })
  describe('ë§¤ì£¼ ë°˜ë³µ', () => { ... })
  describe('ë§¤ì›” ë°˜ë³µ', () => { ... })
  describe('ë§¤ë…„ ë°˜ë³µ', () => { ... })
  describe('ë°˜ë³µ ì—†ìŒ', () => { ... })
  describe('ë°˜ë³µ ì¼ì • ì†ì„±', () => { ... })
});
```

**ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤** (ì´ 16ê°œ):

#### 1. ë§¤ì¼ ë°˜ë³µ (3ê°œ)
- âœ… ë§¤ì¼ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
- âœ… ë§¤ì¼ ë°˜ë³µ ì¼ì •ì„ 2ì¼ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
- âœ… ì¢…ë£Œì¼ì´ ì—†ìœ¼ë©´ ìµœëŒ€ 365ì¼ê¹Œì§€ ìƒì„±í•œë‹¤

#### 2. ë§¤ì£¼ ë°˜ë³µ (2ê°œ)
- âœ… ë§¤ì£¼ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
- âœ… ë§¤ì£¼ ë°˜ë³µ ì¼ì •ì„ 2ì£¼ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤

#### 3. ë§¤ì›” ë°˜ë³µ (4ê°œ)
- âœ… ë§¤ì›” ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
- âœ… ë§¤ì›” ë°˜ë³µ ì¼ì •ì„ 2ê°œì›” ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
- âœ… ë§¤ì›” 31ì¼ ë°˜ë³µ ì¼ì •ì´ 31ì¼ì´ ì—†ëŠ” ë‹¬ì—ëŠ” í•´ë‹¹ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ë¡œ ìƒì„±í•œë‹¤
- âœ… ë§¤ì›” ë°˜ë³µ ì¼ì •ì´ ìœ¤ë…„ì˜ 2ì›”ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•œë‹¤

#### 4. ë§¤ë…„ ë°˜ë³µ (3ê°œ)
- âœ… ë§¤ë…„ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
- âœ… ë§¤ë…„ ë°˜ë³µ ì¼ì •ì„ 2ë…„ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
- âœ… ë§¤ë…„ 2ì›” 29ì¼ ë°˜ë³µ ì¼ì •ì´ ìœ¤ë…„ì´ ì•„ë‹Œ í•´ì—ëŠ” 2ì›” 28ì¼ë¡œ ìƒì„±í•œë‹¤

#### 5. ë°˜ë³µ ì—†ìŒ (1ê°œ)
- âœ… ë°˜ë³µ ìœ í˜•ì´ noneì´ë©´ ì›ë³¸ ì¼ì •ë§Œ ë°˜í™˜í•œë‹¤

#### 6. ë°˜ë³µ ì¼ì • ì†ì„± (3ê°œ)
- âœ… ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ì›ë³¸ ì¼ì •ì˜ ì†ì„±ì„ ìœ ì§€í•œë‹¤
- âœ… ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ê³ ìœ í•œ idë¥¼ ê°€ì§„ë‹¤
- âœ… ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ë™ì¼í•œ repeat.idë¥¼ ê°€ì§„ë‹¤

### Green ë‹¨ê³„ (êµ¬í˜„)

**íŒŒì¼**: `src/utils/recurringEventUtils.ts`

**êµ¬í˜„í•œ í•¨ìˆ˜**:

#### 1. `generateRecurringEvents(event, maxOccurrences)`
ë°˜ë³µ ì„¤ì •ì— ë”°ë¼ ë°˜ë³µ ì¼ì • ë°°ì—´ì„ ìƒì„±í•˜ëŠ” ë©”ì¸ í•¨ìˆ˜

```typescript
export function generateRecurringEvents(event: Event, maxOccurrences = 365): Event[] {
  if (event.repeat.type === 'none') {
    return [event];
  }

  const events: Event[] = [];
  const startDate = new Date(event.date);
  const endDate = event.repeat.endDate ? new Date(event.repeat.endDate) : null;
  const repeatId = event.repeat.id || generateRepeatId();

  let currentDate = new Date(startDate);
  let occurrenceCount = 0;

  while (occurrenceCount < maxOccurrences) {
    if (endDate && currentDate > endDate) {
      break;
    }

    events.push({
      ...event,
      id: generateEventId(),
      date: formatDate(currentDate),
      repeat: {
        ...event.repeat,
        id: repeatId,
      },
    });

    occurrenceCount++;
    currentDate = getNextOccurrence(
      currentDate,
      startDate,
      event.repeat.type,
      event.repeat.interval
    );
  }

  return events;
}
```

#### 2. `getNextOccurrence(currentDate, startDate, type, interval)`
ë°˜ë³µ ìœ í˜•ì— ë”°ë¼ ë‹¤ìŒ ë°œìƒ ë‚ ì§œë¥¼ ê³„ì‚°

**ì£¼ìš” ë¡œì§**:

**ë§¤ì¼ (daily)**:
```typescript
nextDate.setDate(nextDate.getDate() + interval);
```

**ë§¤ì£¼ (weekly)**:
```typescript
nextDate.setDate(nextDate.getDate() + interval * 7);
```

**ë§¤ì›” (monthly)** - ì›”ë§ ë‚ ì§œ ì²˜ë¦¬:
```typescript
// 1. ëª©í‘œ ì›” ê³„ì‚°
const targetMonth = (currentDate.getMonth() + interval) % 12;
const targetYear = currentDate.getFullYear() + Math.floor((currentDate.getMonth() + interval) / 12);

// 2. ë‚ ì§œë¥¼ 1ì¼ë¡œ ì„¤ì •í•˜ì—¬ ì˜¤ë²„í”Œë¡œìš° ë°©ì§€
nextDate.setDate(1);
nextDate.setFullYear(targetYear);
nextDate.setMonth(targetMonth);

// 3. ì›ë˜ ë‚ ì§œë¡œ ì„¤ì • ì‹œë„
nextDate.setDate(originalDay);

// 4. ì›”ì´ ë³€ê²½ë˜ì—ˆìœ¼ë©´ (ì˜¤ë²„í”Œë¡œìš°) í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ë¡œ ì„¤ì •
if (nextDate.getMonth() !== targetMonth) {
  nextDate.setDate(0);
}
```

**ë§¤ë…„ (yearly)** - ìœ¤ë…„ ì²˜ë¦¬:
```typescript
const targetYear = currentDate.getFullYear() + interval;
const targetMonth = startDate.getMonth();

nextDate.setDate(1);
nextDate.setFullYear(targetYear);
nextDate.setMonth(targetMonth);
nextDate.setDate(originalDay);

if (nextDate.getMonth() !== targetMonth) {
  nextDate.setDate(0);
}
```

#### 3. í—¬í¼ í•¨ìˆ˜ë“¤
- `formatDate(date)`: YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ í¬ë§·
- `generateRepeatId()`: ë°˜ë³µ ì‹œë¦¬ì¦ˆ ê³ ìœ  ID ìƒì„±
- `generateEventId()`: ê°œë³„ ì¼ì • ê³ ìœ  ID ìƒì„±

### íƒ€ì… ì—…ë°ì´íŠ¸

**íŒŒì¼**: `src/types.ts`

```typescript
export interface RepeatInfo {
  type: RepeatType;
  interval: number;
  endDate?: string;
  id?: string;  // â­ ì¶”ê°€: ë°˜ë³µ ì‹œë¦¬ì¦ˆ ì‹ë³„ì
}
```

## ğŸ¯ ì—£ì§€ ì¼€ì´ìŠ¤ ì²˜ë¦¬

### 1. ì›”ë§ ë‚ ì§œ ì²˜ë¦¬
**ë¬¸ì œ**: 1ì›” 31ì¼ â†’ 2ì›”ë¡œ ì´ë™í•˜ë©´?
**í•´ê²°**: 2ì›”ì— 31ì¼ì´ ì—†ìœ¼ë¯€ë¡œ 2ì›” 28ì¼(ë˜ëŠ” 29ì¼)ë¡œ ì„¤ì •

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:
```typescript
// 1ì›” 31ì¼ â†’ 2ì›” 28ì¼ â†’ 3ì›” 31ì¼ â†’ 4ì›” 30ì¼
expect(result[0].date).toBe('2025-01-31');
expect(result[1].date).toBe('2025-02-28'); // 2ì›”ì€ 28ì¼ê¹Œì§€
expect(result[2].date).toBe('2025-03-31');
expect(result[3].date).toBe('2025-04-30'); // 4ì›”ì€ 30ì¼ê¹Œì§€
```

### 2. ìœ¤ë…„ ì²˜ë¦¬
**ë¬¸ì œ**: 2024ë…„ 1ì›” 31ì¼ â†’ 2ì›”ì€ ìœ¤ë…„ì´ë¯€ë¡œ 29ì¼ê¹Œì§€
**í•´ê²°**: ìœ¤ë…„ 2ì›”ì€ 29ì¼ë¡œ ì„¤ì •

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:
```typescript
expect(result[0].date).toBe('2024-01-31');
expect(result[1].date).toBe('2024-02-29'); // 2024ë…„ì€ ìœ¤ë…„
expect(result[2].date).toBe('2024-03-31');
```

### 3. 2ì›” 29ì¼ ë§¤ë…„ ë°˜ë³µ
**ë¬¸ì œ**: 2024ë…„ 2ì›” 29ì¼ â†’ 2025ë…„ì€ í‰ë…„ì´ë¯€ë¡œ 2ì›” 29ì¼ ì—†ìŒ
**í•´ê²°**: í‰ë…„ì—ëŠ” 2ì›” 28ì¼ë¡œ ì„¤ì •

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**:
```typescript
expect(result[0].date).toBe('2024-02-29'); // ìœ¤ë…„
expect(result[1].date).toBe('2025-02-28'); // í‰ë…„
expect(result[2].date).toBe('2026-02-28'); // í‰ë…„
expect(result[3].date).toBe('2027-02-28'); // í‰ë…„
expect(result[4].date).toBe('2028-02-29'); // ìœ¤ë…„
```

## ğŸ”§ êµ¬í˜„ ê³¼ì •ì—ì„œ í•´ê²°í•œ ë¬¸ì œë“¤

### ë¬¸ì œ 1: ì›”ë§ ë‚ ì§œ ì˜¤ë²„í”Œë¡œìš°
**ì´ˆê¸° ë¬¸ì œ**:
```typescript
nextDate.setMonth(nextDate.getMonth() + interval);
nextDate.setDate(originalDay);
```
â†’ 2ì›” 31ì¼ì´ ë˜ë ¤ê³  í•˜ë©´ 3ì›” 3ì¼ì´ ë˜ê³ , ê·¸ ìƒíƒœì—ì„œ setDate(31)ì„ í•˜ë©´ 3ì›” 31ì¼ì´ ë¨

**í•´ê²°**:
```typescript
nextDate.setDate(1);  // ë¨¼ì € 1ì¼ë¡œ ì„¤ì •
nextDate.setMonth(targetMonth);
nextDate.setDate(originalDay);  // ê·¸ ë‹¤ìŒ ì›ë˜ ë‚ ì§œë¡œ
if (nextDate.getMonth() !== targetMonth) {
  nextDate.setDate(0);  // ì˜¤ë²„í”Œë¡œìš° ì‹œ ì´ì „ ë‹¬ ë§ˆì§€ë§‰ ë‚ 
}
```

### ë¬¸ì œ 2: ì›ë˜ ì‹œì‘ ë‚ ì§œ ì¶”ì 
**ì´ˆê¸° ë¬¸ì œ**: í˜„ì¬ ë‚ ì§œë§Œ ë³´ê³  ë‹¤ìŒ ë‚ ì§œ ê³„ì‚° â†’ 2ì›” 28ì¼ì—ì„œ 3ì›”ë¡œ ê°€ë©´ 3ì›” 28ì¼ì´ ë¨ (31ì¼ë¡œ ëŒì•„ê°€ì§€ ì•ŠìŒ)

**í•´ê²°**: `getNextOccurrence`ì— `startDate` ì „ë‹¬í•˜ì—¬ ì›ë˜ ë‚ ì§œ ê¸°ì–µ

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

```
âœ“ src/__tests__/unit/medium.recurringEvents.spec.ts (16 tests) 9ms
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì¼ ë°˜ë³µ > ë§¤ì¼ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì¼ ë°˜ë³µ > ë§¤ì¼ ë°˜ë³µ ì¼ì •ì„ 2ì¼ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì¼ ë°˜ë³µ > ì¢…ë£Œì¼ì´ ì—†ìœ¼ë©´ ìµœëŒ€ 365ì¼ê¹Œì§€ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì£¼ ë°˜ë³µ > ë§¤ì£¼ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì£¼ ë°˜ë³µ > ë§¤ì£¼ ë°˜ë³µ ì¼ì •ì„ 2ì£¼ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì›” ë°˜ë³µ > ë§¤ì›” ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì›” ë°˜ë³µ > ë§¤ì›” ë°˜ë³µ ì¼ì •ì„ 2ê°œì›” ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì›” ë°˜ë³µ > ë§¤ì›” 31ì¼ ë°˜ë³µ ì¼ì •ì´ 31ì¼ì´ ì—†ëŠ” ë‹¬ì—ëŠ” í•´ë‹¹ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ì›” ë°˜ë³µ > ë§¤ì›” ë°˜ë³µ ì¼ì •ì´ ìœ¤ë…„ì˜ 2ì›”ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ë…„ ë°˜ë³µ > ë§¤ë…„ ë°˜ë³µ ì¼ì •ì„ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ë…„ ë°˜ë³µ > ë§¤ë…„ ë°˜ë³µ ì¼ì •ì„ 2ë…„ ê°„ê²©ìœ¼ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë§¤ë…„ ë°˜ë³µ > ë§¤ë…„ 2ì›” 29ì¼ ë°˜ë³µ ì¼ì •ì´ ìœ¤ë…„ì´ ì•„ë‹Œ í•´ì—ëŠ” 2ì›” 28ì¼ë¡œ ìƒì„±í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë°˜ë³µ ì—†ìŒ > ë°˜ë³µ ìœ í˜•ì´ noneì´ë©´ ì›ë³¸ ì¼ì •ë§Œ ë°˜í™˜í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë°˜ë³µ ì¼ì • ì†ì„± > ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ì›ë³¸ ì¼ì •ì˜ ì†ì„±ì„ ìœ ì§€í•œë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë°˜ë³µ ì¼ì • ì†ì„± > ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ê³ ìœ í•œ idë¥¼ ê°€ì§„ë‹¤
  âœ“ ë°˜ë³µì¼ì • > > ë°˜ë³µ ì¼ì • ì†ì„± > ìƒì„±ëœ ëª¨ë“  ë°˜ë³µ ì¼ì •ì´ ë™ì¼í•œ repeat.idë¥¼ ê°€ì§„ë‹¤

Test Files  1 passed (1)
Tests  16 passed (16)
```

## ğŸ‰ ì™„ë£Œ ì‚¬í•­

âœ… **íŒŒì¼ ìƒì„±**:
- `src/__tests__/unit/medium.recurringEvents.spec.ts` - ë°˜ë³µ ì¼ì • í…ŒìŠ¤íŠ¸
- `src/utils/recurringEventUtils.ts` - ë°˜ë³µ ì¼ì • ìœ í‹¸ í•¨ìˆ˜

âœ… **íƒ€ì… ì—…ë°ì´íŠ¸**:
- `src/types.ts` - `RepeatInfo`ì— `id?: string` ì¶”ê°€

âœ… **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**:
- ë§¤ì¼/ë§¤ì£¼/ë§¤ì›”/ë§¤ë…„ ë°˜ë³µ ëª¨ë“  íŒ¨í„´ âœ…
- ê°„ê²©(interval) ì²˜ë¦¬ âœ…
- ì¢…ë£Œì¼ ì²˜ë¦¬ âœ…
- ì›”ë§ ë‚ ì§œ ì²˜ë¦¬ âœ…
- ìœ¤ë…„ ì²˜ë¦¬ âœ…
- ë°˜ë³µ ID ê´€ë¦¬ âœ…
- ì†ì„± ìœ ì§€ ê²€ì¦ âœ…

âœ… **TDD ì›ì¹™ ì¤€ìˆ˜**:
- Red: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„± âœ…
- Green: í…ŒìŠ¤íŠ¸ í†µê³¼í•˜ëŠ” ìµœì†Œ ì½”ë“œ êµ¬í˜„ âœ…
- ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (16/16) âœ…

## ğŸ’¡ ì‚¬ìš© ì˜ˆì‹œ

```typescript
import { generateRecurringEvents } from './utils/recurringEventUtils';

const event: Event = {
  id: '1',
  title: 'íŒ€ íšŒì˜',
  date: '2025-01-01',
  startTime: '10:00',
  endTime: '11:00',
  description: 'ì£¼ê°„ íŒ€ ë¯¸íŒ…',
  location: 'íšŒì˜ì‹¤ A',
  category: 'ì—…ë¬´',
  repeat: {
    type: 'weekly',
    interval: 1,
    endDate: '2025-01-29',
  },
  notificationTime: 10,
};

const recurringEvents = generateRecurringEvents(event);
// Returns: 5ê°œì˜ ì¼ì • (1/1, 1/8, 1/15, 1/22, 1/29)
```

ì´ì œ ë°˜ë³µ ì¼ì • ê¸°ëŠ¥ì´ ì™„ë²½í•˜ê²Œ êµ¬í˜„ë˜ê³  í…ŒìŠ¤íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸš€

