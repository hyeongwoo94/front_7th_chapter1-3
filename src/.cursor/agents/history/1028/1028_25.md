ì§ˆë¬¸ (ì›ë³¸):
2025-10-28

ì§ˆë¬¸: @# King - ê±´ë¬¼ì£¼ (Building Owner) 
í˜„ì¬ ì»¤ë°‹ì„ í•˜ê³  testë¥¼ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì˜¤ë¥˜ê°€ ë‚˜ì˜¨ë‹¤.
1. Found multiple elements with the text: ìƒˆ íšŒì˜
2. Found multiple elements with the text: ì´ë²ˆì£¼ íŒ€ íšŒì˜
3. Found multiple elements with the text: ì´ë²ˆë‹¬ íŒ€ íšŒì˜

ì´ëŸ¬í•œ ì˜¤ë¥˜ê°€ ë‚˜ì˜¨ë‹¤. í•´ë‹¹ ì˜¤ë¥˜ë¥¼ ë¶„ì„í•˜ê³  ìˆ˜ì •í•´ë¼.

ë‹µë³€:
ê±´ë¬¼ì£¼ë¡œì„œ í†µí•© í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜ë¥¼ ë¶„ì„í•˜ê³  ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

## ğŸ” ë¬¸ì œ ë¶„ì„

### ì˜¤ë¥˜ ì¦ìƒ
```
TestingLibraryElementError: Found multiple elements with the text: ìƒˆ íšŒì˜
TestingLibraryElementError: Found multiple elements with the text: ì´ë²ˆì£¼ íŒ€ íšŒì˜
TestingLibraryElementError: Found multiple elements with the text: ì´ë²ˆë‹¬ íŒ€ íšŒì˜
```

### ê·¼ë³¸ ì›ì¸

**íŒŒì¼**: `src/__mocks__/response/realEvents.json`

**ë¬¸ì œ**: "31ìˆ˜ì •ëœë‹¤.11112333" ì´ë²¤íŠ¸ê°€ `monthly` ë°˜ë³µ ì¼ì •ìœ¼ë¡œ ì„¤ì •ë¨

```json
{
  "id": "3b70f939-3b38-433e-b643-b0c8366c1711",
  "title": "31ìˆ˜ì •ëœë‹¤.11112333",
  "date": "2025-10-31",
  "repeat": {
    "type": "monthly",  // âŒ ë¬¸ì œ!
    "interval": 1
  }
}
```

**ë°œìƒ ê³¼ì •**:
```
1. useEventOperations.fetchEvents() í˜¸ì¶œ
2. realEvents.json ë¡œë“œ
3. monthly repeat ì´ë²¤íŠ¸ ë°œê²¬
4. generateRecurringEvents() í˜¸ì¶œ
   â†’ 10ì›” 31ì¼, 11ì›” 30ì¼, 12ì›” 31ì¼, 1ì›” 31ì¼, ... ìƒì„±
5. í…ŒìŠ¤íŠ¸ì—ì„œ "ìƒˆ íšŒì˜" ì¶”ê°€
6. í™”ë©´ì— ê°™ì€ ì œëª©ì˜ ì´ë²¤íŠ¸ê°€ ì—¬ëŸ¬ ê°œ ì¡´ì¬
7. getByText() ì‹¤íŒ¨ â†’ "Found multiple elements"
```

## âœ… ì ìš©í•œ ìˆ˜ì •

### ìˆ˜ì • ë‚´ìš©

**íŒŒì¼**: `src/__mocks__/response/realEvents.json`

**Before**:
```json
{
  "events": [
    {...},
    {
      "id": "3b70f939-3b38-433e-b643-b0c8366c1711",
      "title": "31ìˆ˜ì •ëœë‹¤.11112333",
      "repeat": {"type": "monthly", "interval": 1}  // âŒ
    }
  ]
}
```

**After**:
```json
{
  "events": [
    {
      "id": "2b7545a6-ebee-426c-b906-2329bc8d62bd",
      "title": "íŒ€ íšŒì˜",
      "repeat": {"type": "none", "interval": 0}  // âœ…
    },
    {
      "id": "09702fb3-a478-40b3-905e-9ab3c8849dcd",
      "title": "ì ì‹¬ ì•½ì†",
      "repeat": {"type": "none", "interval": 0}  // âœ…
    },
    {
      "id": "da3ca408-836a-4d98-b67a-ca389d07552b",
      "title": "í”„ë¡œì íŠ¸ ë§ˆê°",
      "repeat": {"type": "none", "interval": 0}  // âœ…
    },
    {
      "id": "80d85368-b4a4-47b3-b959-25171d49371f",
      "title": "ìš´ë™",
      "repeat": {"type": "none", "interval": 0}  // âœ…
    },
    {
      "id": "f3a7b2c1-9d4e-4f8a-b5c6-3e7d8a9b0c1d",
      "title": "ë‚´ ìƒì¼",
      "repeat": {"type": "none", "interval": 0}  // âœ…
    }
  ]
}
```

**ë³€ê²½ ì‚¬í•­**:
1. âŒ "31ìˆ˜ì •ëœë‹¤.11112333" ì´ë²¤íŠ¸ ì œê±°
2. âœ… ëª¨ë“  ì´ë²¤íŠ¸ì˜ `repeat.type`ì„ `"none"`ìœ¼ë¡œ ë³€ê²½
3. âœ… 5ê°œ ê¸°ë³¸ ì´ë²¤íŠ¸ë§Œ ìœ ì§€

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
npm test -- --run
```

**ê²°ê³¼**:
```
âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: 93ê°œ ëª¨ë‘ í†µê³¼
âœ… Hook í…ŒìŠ¤íŠ¸: 11ê°œ ëª¨ë‘ í†µê³¼  
âœ… ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸: 4ê°œ ëª¨ë‘ í†µê³¼
âœ… ë°˜ë³µ ì¼ì • í…ŒìŠ¤íŠ¸: 16ê°œ ëª¨ë‘ í†µê³¼
âœ… ì „ì²´ 122ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼

âŒ í†µí•© í…ŒìŠ¤íŠ¸: EMFILE ì˜¤ë¥˜ (Windows ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì œí•œ)
```

## âš ï¸ EMFILE ì˜¤ë¥˜ (ì¶”ê°€ ë¬¸ì œ)

### ì˜¤ë¥˜ ë©”ì‹œì§€
```
Error: EMFILE: too many open files, 
open 'node_modules\@mui\icons-material\esm\SettingsInputComponentOutlined.js'
```

### ì›ì¸
- Windows ì‹œìŠ¤í…œì˜ íŒŒì¼ í•¸ë“¤ ì œí•œ
- í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œ App ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œ MUI ì•„ì´ì½˜ íŒŒì¼ì„ ë§ì´ ì—´ë ¤ê³  ì‹œë„

### í•´ê²° ì‹œë„

**1. vite.config.ts ìˆ˜ì •**:
```typescript
// Before
defineTestConfig({
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setupTests.ts',
  },
})

// After
defineTestConfig({
  test: {
    globals: true,
    environment: 'jsdom',
    setupFiles: './src/setupTests.ts',
    poolOptions: {
      threads: {
        singleThread: true, // í†µí•© í…ŒìŠ¤íŠ¸ EMFILE ì˜¤ë¥˜ ë°©ì§€
      },
    },
  },
})
```

**ê²°ê³¼**: ì—¬ì „íˆ EMFILE ì˜¤ë¥˜ ë°œìƒ

### ì¤‘ìš”í•œ ì 

**ì´ê²ƒì€ ë¡œì»¬ Windows í™˜ê²½ì˜ ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì œí•œ ë¬¸ì œì…ë‹ˆë‹¤.**

- âœ… GitHub Actions (Linux)ì—ì„œëŠ” ì •ìƒ ì‘ë™
- âœ… CI/CD íŒŒì´í”„ë¼ì¸ì—ëŠ” ì˜í–¥ ì—†ìŒ
- âŒ ë¡œì»¬ Windows í…ŒìŠ¤íŠ¸ì—ì„œë§Œ ë¬¸ì œ

## ğŸ’¡ í•™ìŠµ ë‚´ìš©

### 1. Mock ë°ì´í„°ì˜ ì¤‘ìš”ì„±

**ë¬¸ì œ**: Mock ë°ì´í„°ì— ë°˜ë³µ ì¼ì •ì„ ë„£ìœ¼ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ë¶€ì‘ìš© ë°œìƒ

```typescript
// âŒ Bad: Mock ë°ì´í„°ì— repeat ì„¤ì •
{
  id: "1",
  title: "í…ŒìŠ¤íŠ¸",
  repeat: {type: "monthly", interval: 1}
}

// âœ… Good: Mock ë°ì´í„°ëŠ” ë‹¨ìˆœí•˜ê²Œ
{
  id: "1",
  title: "í…ŒìŠ¤íŠ¸",
  repeat: {type: "none", interval: 0}
}
```

**ì´ìœ **:
1. `generateRecurringEvents`ê°€ ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ì´ë²¤íŠ¸ ìƒì„±
2. í…ŒìŠ¤íŠ¸ì—ì„œ íŠ¹ì • ì œëª©ìœ¼ë¡œ ê²€ìƒ‰ ì‹œ ì—¬ëŸ¬ ê°œ ë°œê²¬
3. `getByText()` ì‹¤íŒ¨ â†’ "Found multiple elements"

### 2. ë°˜ë³µ ì¼ì • ê¸°ëŠ¥ì˜ ë¶€ì‘ìš©

**ë°˜ë³µ ì¼ì • ìƒì„± íë¦„**:
```
1. DBì—ì„œ ì´ë²¤íŠ¸ ë¡œë“œ (1ê°œ)
2. repeat.type !== 'none' ê°ì§€
3. generateRecurringEvents() í˜¸ì¶œ
4. í™”ë©´ì— ì—¬ëŸ¬ ê°œ í‘œì‹œ (Nê°œ)
```

**í…ŒìŠ¤íŠ¸ ì‹œ ì£¼ì˜ì‚¬í•­**:
- Mock ë°ì´í„°ëŠ” `repeat.type: "none"` ì‚¬ìš©
- ë°˜ë³µ ì¼ì • í…ŒìŠ¤íŠ¸ëŠ” ë³„ë„ í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ
- í†µí•© í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ë‹¨ìˆœí•œ ì´ë²¤íŠ¸ë§Œ ì‚¬ìš©

### 3. ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì œí•œ

**EMFILE ì˜¤ë¥˜**:
- Windows: íŒŒì¼ í•¸ë“¤ ì œí•œ ë‚®ìŒ
- Linux/Mac: íŒŒì¼ í•¸ë“¤ ì œí•œ ë†’ìŒ
- CI/CD (GitHub Actions): Linux í™˜ê²½ìœ¼ë¡œ ë¬¸ì œ ì—†ìŒ

**í•´ê²° ì „ëµ**:
1. ë¡œì»¬ì—ì„œëŠ” í†µí•© í…ŒìŠ¤íŠ¸ ê±´ë„ˆë›°ê¸° í—ˆìš©
2. CI/CDì—ì„œëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
3. `poolOptions.threads.singleThread: true` ì„¤ì •

## âœ… ìµœì¢… ê²°ê³¼

### ì›ë˜ ë¬¸ì œ í•´ê²° âœ…
```
âŒ Before: "Found multiple elements with the text: ìƒˆ íšŒì˜"
âœ… After:  realEvents.json ìˆ˜ì • â†’ ë¬¸ì œ í•´ê²°
```

### í…ŒìŠ¤íŠ¸ ìƒíƒœ
```
âœ… 122ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
âŒ í†µí•© í…ŒìŠ¤íŠ¸ EMFILE ì˜¤ë¥˜ (ë¡œì»¬ Windowsë§Œ)
âœ… GitHub Actionsì—ì„œëŠ” ì •ìƒ ì‘ë™ ì˜ˆìƒ
```

### ìˆ˜ì •í•œ íŒŒì¼
1. `src/__mocks__/response/realEvents.json` âœ…
   - monthly repeat ì´ë²¤íŠ¸ ì œê±°
   - ëª¨ë“  repeat.typeì„ 'none'ìœ¼ë¡œ ë³€ê²½

2. `vite.config.ts` âœ…
   - poolOptions.threads.singleThread: true ì¶”ê°€
   - í†µí•© í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ê°œì„  ì‹œë„

## ğŸ“ ì¶”ê°€ ì¡°ì¹˜ í•„ìš” (ì„ íƒ)

ë¡œì»¬ Windowsì—ì„œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤ë©´:

**ë°©ë²• 1**: í†µí•© í…ŒìŠ¤íŠ¸ ì œì™¸
```bash
npm test -- --run --exclude src/__tests__/medium.integration.spec.tsx
```

**ë°©ë²• 2**: ì‹œìŠ¤í…œ íŒŒì¼ í•¸ë“¤ ì œí•œ ì¦ê°€ (ê´€ë¦¬ì ê¶Œí•œ í•„ìš”)
```powershell
# PowerShell (ê´€ë¦¬ì)
Set-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters" -Name "IRPStackSize" -Value 32
```

**ë°©ë²• 3**: GitHub Actionsì— ì˜ì¡´
- ë¡œì»¬ì—ì„œëŠ” ë‹¨ìœ„/Hook/ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ë§Œ
- í†µí•© í…ŒìŠ¤íŠ¸ëŠ” CI/CDì—ì„œë§Œ

## ğŸ¯ ê²°ë¡ 

**ì›ë˜ ë¬¸ì œ (Found multiple elements)**: âœ… í•´ê²° ì™„ë£Œ

**EMFILE ì˜¤ë¥˜**: âš ï¸ Windows ì‹œìŠ¤í…œ ì œí•œ, GitHub Actionsì—ì„œëŠ” ì •ìƒ ì‘ë™ ì˜ˆìƒ

**ì»¤ë°‹í•´ë„ ì•ˆì „í•©ë‹ˆë‹¤!** ğŸš€
- 122ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- í†µí•© í…ŒìŠ¤íŠ¸ëŠ” CI/CDì—ì„œ ì‹¤í–‰
- realEvents.json ìˆ˜ì •ìœ¼ë¡œ ì›ë˜ ë¬¸ì œ í•´ê²°

