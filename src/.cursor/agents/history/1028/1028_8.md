질문 (원본):
2025-10-28

질문: @### King (건물주) 
1. .cursorrules에 추가 규칙을 넣을거야.
추가규칙은 너가 md를 읽어야하는 순서야.
여기서 작업자는 people 안에 잇는 md들을 말하는거야. king = 건물주 feedback = 관리자 memory=세월이 planer = 기획자 tools = 노동자
1.내가 너에게 명령어를 내린다.
해당 명령어를 수행하는 기본규칙은 .cursorrules안의 있는 것을 따른다.
2. people 폴더 안에 있는 작업자들이 나의 명령어를 분석/의도 파악을 한다. 
3. people 폴더 안의 작업자들은 src 전체 파일의 패턴/분석을 하고 home안의 파일들을 참고하여 작업을 시작한다.
4. 작업자들은 각자 역할의 맡은 업무만 한다. 
예시) 기획자가 노동자의 업무를 하지 않는다. 기획자가 관리자의 업무를 하지 않는다. 이렇게 역할 분담을 나눔으로써 효율성을 증가시키는 거야.
5. 작업자들이 작업을 할때는 agendts/doc/ 안의 파일들을 체크하면서 작업을 시작한다.

작업을 위해 명세서 읽는 순서는 이거야.

답변:
건물주로서 `.cursorrules`에 작업 흐름과 명세서 읽는 순서 규칙을 추가했습니다.

## 📋 추가된 규칙

### 새로운 섹션: WORKFLOW & EXECUTION ORDER
<!-- 작업 흐름 및 실행 순서 -->

`.cursorrules`에 다음 3개 서브섹션을 추가했습니다:

#### 3.1 Agent Role Definitions
<!-- 에이전트 역할 정의 -->

5가지 에이전트 역할과 파일 경로를 명시:
- **King (건물주)**: `king.md` - 최고 지휘자
- **Feedback (관리자)**: `feedback.md` - 품질 관리자
- **Memory (세월이)**: `memory.md` - 지식 관리자
- **Planer (기획자)**: `planer.md` - 프로젝트 기획자
- **Tools (노동자)**: `tools.md` - 구현 노동자

#### 3.2 Documentation Reading Order
<!-- 명세서 읽는 순서 -->

명령을 받았을 때 문서를 읽는 5단계 순서:

**Step 1: Basic Rules** (기본 규칙)
- `.cursorrules` 읽기
- 핵심 가이드라인과 컨벤션 확인

**Step 2: Role Assignment** (역할 배정)
- `src/.cursor/agents/people/` 폴더에서 배정된 역할 파일 읽기
- King → `king.md`
- Feedback → `feedback.md`
- Memory → `memory.md`
- Planer → `planer.md`
- Tools → `tools.md`

**Step 3: Context Reference** (컨텍스트 참조)
- `src/.cursor/agents/home/` 파일 읽기
- 프로젝트별 컨텍스트와 패턴 제공

**Step 4: Guidelines Check** (가이드라인 확인)
- `src/.cursor/agents/doc/` 파일 확인
- `tdd.md` - TDD 방법론
- `checklist.md` - 커밋 전 체크리스트
- `test-guidelines.md` - 테스트 작성 가이드

**Step 5: Codebase Analysis** (코드베이스 분석)
- `src/` 파일 패턴과 구조 분석
- 기존 코드 패턴 이해
- 아키텍처 결정 사항 식별

#### 3.3 Work Execution Flow
<!-- 작업 실행 흐름 -->

**Command Processing Flow** (명령 처리 흐름):

1. **User issues command** to King (건물주)
   - 사용자가 명령 발행
   - `.cursorrules` 기본 규칙 따름

2. **Agents analyze command** (명령 분석)
   - `people/` 폴더의 모든 에이전트가 분석 참여
   - 사용자 의도와 요구사항 이해

3. **Pattern analysis** (패턴 분석)
   - 전체 `src/` 파일의 코드베이스 패턴 분석
   - `home/*.md` 파일을 컨텍스트로 참조

4. **Role-specific work assignment** (역할별 작업 배정)
   - 각 에이전트는 배정된 역할만 수행
   - 엄격한 역할 분리로 효율성 증가

5. **Execute with guidelines** (가이드라인 준수 실행)
   - 작업 중 `doc/` 파일 확인
   - TDD, 체크리스트, 테스트 가이드라인 준수

### Role Separation Rules (CRITICAL) ⚠️
<!-- 역할 분리 규칙 (필수) -->

**각 에이전트는 배정된 작업만 수행. 역할 넘나들지 않음.**

엄격한 규칙:
- ❌ Planer (기획자) MUST NOT do Tools (노동자) work
- ❌ Planer (기획자) MUST NOT do Feedback (관리자) work
- ❌ Tools (노동자) MUST NOT do Planer (기획자) work
- ❌ Tools (노동자) MUST NOT do Feedback (관리자) work

**역할 분리의 이점:**
- ✅ Clear responsibility boundaries (명확한 책임 경계)
- ✅ Specialized expertise application (전문 지식 적용)
- ✅ Parallel work execution (병렬 작업 실행)
- ✅ Reduced context switching (컨텍스트 전환 감소)

## 📊 문서 구조

### 전체 흐름 다이어그램:

```
User Command (사용자 명령)
    ↓
1. Read .cursorrules (기본 규칙)
    ↓
2. Read people/*.md (역할별 파일)
    ↓
3. Read home/*.md (컨텍스트)
    ↓
4. Check doc/*.md (가이드라인)
    ↓
5. Analyze src/ (코드베이스)
    ↓
Work Execution (작업 실행)
```

### 역할별 작업 분담:

```
┌─────────────────────────────────────┐
│  User → King (건물주)                │
│  명령 발행 및 조정                    │
└──────────────┬──────────────────────┘
               │
    ┌──────────┼──────────┬──────────┐
    │          │          │          │
    ↓          ↓          ↓          ↓
┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
│Feedback│ │ Memory │ │ Planer │ │ Tools  │
│(관리자) │ │(세월이) │ │(기획자) │ │(노동자) │
└────────┘ └────────┘ └────────┘ └────────┘
   품질      지식       계획       구현
  관리자    관리자     담당자     담당자

❌ 역할 교차 금지 (No Role Crossing)
✅ 각자 전문 영역만 (Own Expertise Only)
```

## 🎯 핵심 원칙

### 1. 순차적 문서 읽기
```
.cursorrules → people/*.md → home/*.md → doc/*.md → src/
```

### 2. 명확한 역할 분리
- 기획자 ≠ 노동자
- 기획자 ≠ 관리자
- 노동자 ≠ 기획자
- 노동자 ≠ 관리자

### 3. 효율성 극대화
- 전문성 집중
- 병렬 처리
- 책임 명확화
- 빠른 의사결정

## ✅ 변경 사항 요약

### Before (기존):
- 간단한 Agent System & Roles 설명만 존재
- 작업 순서 불명확
- 역할 분리 규칙 없음

### After (변경):
- ✅ 5개 에이전트 역할 명시
- ✅ 5단계 문서 읽기 순서 명확화
- ✅ 5단계 명령 처리 흐름 정의
- ✅ 엄격한 역할 분리 규칙 추가
- ✅ 효율성 증가 방법 설명

### 추가된 줄 수:
- 약 140줄의 상세한 작업 흐름 규칙
- 영어 + 한글 주석으로 이중 언어 지원

## 📝 사용 예시

### 시나리오: 새로운 기능 추가 요청

1. **사용자**: "@King 모달에 닫기 버튼 추가해줘"

2. **King (건물주)** 읽기 순서:
   - `.cursorrules` → `king.md` → `home/kingHome.md` → `doc/*.md` → `src/`

3. **Planer (기획자)** 역할:
   - 요구사항 분석
   - 작업 계획 수립
   - ❌ 코드 구현 안 함 (노동자 역할)

4. **Tools (노동자)** 역할:
   - 코드 구현
   - TDD 따라 테스트 작성
   - ❌ 품질 검토 안 함 (관리자 역할)

5. **Feedback (관리자)** 역할:
   - 코드 품질 검토
   - 테스트 커버리지 확인
   - ❌ 계획 수립 안 함 (기획자 역할)

이제 모든 작업자가 명확한 순서와 역할에 따라 효율적으로 작업할 수 있습니다! 🚀

