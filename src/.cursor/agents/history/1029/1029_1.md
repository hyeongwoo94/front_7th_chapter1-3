ì§ˆë¬¸ (ì›ë³¸):
2025-10-29

ì§ˆë¬¸: @# Planner - ê³„íšì (Project Planner) ë„ˆê°€ ì‚¬ìš©í•  PRDë¥¼ ë§Œë“¤ì.

- 1. ë°˜ë³µ ìœ í˜• ì„ íƒ
  - [ ] ì¼ì • ìƒì„± ë˜ëŠ” ìˆ˜ì • ì‹œ ë°˜ë³µ ìœ í˜•ì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.
  - [ ] ë°˜ë³µ ìœ í˜•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤: ë§¤ì¼, ë§¤ì£¼, ë§¤ì›”, ë§¤ë…„
    - [ ] 31ì¼ì— ë§¤ì›”ì„ ì„ íƒí•œë‹¤ë©´ â†’ ë§¤ì›” ë§ˆì§€ë§‰ì´ ì•„ë‹Œ, 31ì¼ì—ë§Œ ìƒì„±í•˜ì„¸ìš”.
    - [ ] ìœ¤ë…„ 29ì¼ì— ë§¤ë…„ì„ ì„ íƒí•œë‹¤ë©´ â†’ 29ì¼ì—ë§Œ ìƒì„±í•˜ì„¸ìš”!
  - [ ] ë°˜ë³µì¼ì •ì€ ì¼ì • ê²¹ì¹¨ì„ ê³ ë ¤í•˜ì§€ ì•ŠëŠ”ë‹¤.

2. ë°˜ë³µ ì¼ì • í‘œì‹œ
   - [ ] ìº˜ë¦°ë” ë·°ì—ì„œ ë°˜ë³µ ì¼ì •ì„ ì•„ì´ì½˜ì„ ë„£ì–´ êµ¬ë¶„í•˜ì—¬ í‘œì‹œí•œë‹¤.
3. ë°˜ë³µ ì¢…ë£Œ
   - [ ] ë°˜ë³µ ì¢…ë£Œ ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
   - [ ] ì˜µì…˜: íŠ¹ì • ë‚ ì§œê¹Œì§€
     - ì˜ˆì œ íŠ¹ì„±ìƒ, 2025-12-31ê¹Œì§€ ìµœëŒ€ ì¼ìë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”.
4. **ë°˜ë³µ ì¼ì • ìˆ˜ì •**
   1. [ ] 'í•´ë‹¹ ì¼ì •ë§Œ ìˆ˜ì •í•˜ì‹œê² ì–´ìš”?' ë¼ëŠ” í…ìŠ¤íŠ¸ì—ì„œ 'ì˜ˆ'ë¼ê³  ëˆ„ë¥´ëŠ” ê²½ìš° ë‹¨ì¼ ìˆ˜ì •
      - [ ] ë°˜ë³µì¼ì •ì„ ìˆ˜ì •í•˜ë©´ ë‹¨ì¼ ì¼ì •ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.
      - [ ] ë°˜ë³µì¼ì • ì•„ì´ì½˜ë„ ì‚¬ë¼ì§‘ë‹ˆë‹¤.
   2. [ ] 'í•´ë‹¹ ì¼ì •ë§Œ ìˆ˜ì •í•˜ì‹œê² ì–´ìš”?' ë¼ëŠ” í…ìŠ¤íŠ¸ì—ì„œ 'ì•„ë‹ˆì˜¤'ë¼ê³  ëˆ„ë¥´ëŠ” ê²½ìš° ì „ì²´ ìˆ˜ì •
      - [ ] ì´ ê²½ìš° ë°˜ë³µ ì¼ì •ì€ ìœ ì§€ë©ë‹ˆë‹¤.
      - [ ] ë°˜ë³µì¼ì • ì•„ì´ì½˜ë„ ìœ ì§€ë©ë‹ˆë‹¤.
5. **ë°˜ë³µ ì¼ì • ì‚­ì œ**
   1. [ ] 'í•´ë‹¹ ì¼ì •ë§Œ ì‚­ì œí•˜ì‹œê² ì–´ìš”?' ë¼ëŠ” í…ìŠ¤íŠ¸ì—ì„œ 'ì˜ˆ'ë¼ê³  ëˆ„ë¥´ëŠ” ê²½ìš° ë‹¨ì¼ ìˆ˜ì •
      1. [ ] í•´ë‹¹ ì¼ì •ë§Œ ì‚­ì œí•©ë‹ˆë‹¤.
   2. [ ] 'í•´ë‹¹ ì¼ì •ë§Œ ì‚­ì œí•˜ì‹œê² ì–´ìš”?' ë¼ëŠ” í…ìŠ¤íŠ¸ì—ì„œ 'ì•„ë‹ˆì˜¤'ë¼ê³  ëˆ„ë¥´ëŠ” ê²½ìš° ì „ì²´ ìˆ˜ì •
      1. [ ] ë°˜ë³µ ì¼ì •ì˜ ëª¨ë“  ì¼ì •ì„ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.

ë‚˜ëŠ” ì´ëŸ°ê²ƒì„ í• ê±°ì•¼ ê³§. historì˜ íŒŒì¼ë“¤ì„ ë³´ê³  ë„ˆê°€ ì‘ì„±í•´ë´.

 ---------
 'í•´ë‹¹ ì¼ì •ë§Œ ìˆ˜ì •í•˜ì‹œê² ì–´ìš”?' ë¼ëŠ” í…ìŠ¤íŠ¸ì—ì„œ 'ì•„ë‹ˆì˜¤'ë¼ê³  ëˆ„ë¥´ëŠ” ê²½ìš° ì „ì²´ ìˆ˜ì •
ë‚´ê°€ ì´ê²ƒë§Œ ì‘ì„±ì„ í•´ì„œ ë„ˆì—ê²Œ ì¤¬ì„ë•Œ
ë„ˆê°€ ì´ ë¬¸ì¥ì„ íŒŒì•…í•˜ê³  ì‹¤í–‰ìœ¼ë¡œ ì˜®ê¸¸ ìˆ˜ ìˆë„ë¡ prdë¥¼ ì‘ì„±í•´ë´.
ì´prdëŠ” agents/prd.mdì— ì‘ì„±í•´ë¼.
prdì— ê¼­ ë“¤ì–´ê°€ì•¼í•˜ëŠ”ê²ƒì€ input outputì´ ë¹„êµê°€ ë˜ì–´ì•¼í•˜ê³  ì²´í¬ë¦¬ìŠ¤íŠ¸ê°€ ìˆì–´ì•¼í•˜ê³  ì‘ì—…ì„ í• ë•Œ ì–´ë–¤ ë¬¸ì„œë¥¼ ì°¸ê³ í• ê»€ì§€ë„ ìˆì–´ì•¼í•œë‹¤. ì´ìŠˆê°€ ìƒê²¼ì„ë•ŒëŠ” ì–´ë–»ê²Œ í• ê»€ì§€ ë„ ë“¤ì–´ ìˆì–´ì•¼í•´.

ë‹µë³€:

# PRD (Product Requirement Document) í…œí”Œë¦¿ ìƒì„± ì™„ë£Œ!

Plannerê°€ ì‚¬ìš©í•  í‘œì¤€í™”ëœ PRD í…œí”Œë¦¿ê³¼ êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ `src/.cursor/agents/prd.md`ì— ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ PRD êµ¬ì¡°

### 1ï¸âƒ£ **PRD Template Structure** (í…œí”Œë¦¿ êµ¬ì¡°)

PRDëŠ” ë‹¤ìŒ 8ê°œ ì„¹ì…˜ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **Feature Overview** (ê¸°ëŠ¥ ê°œìš”)
   - What, Why, User Story

2. **Input â†’ Output Specification** â­ (ì…ë ¥ â†’ ì¶œë ¥ ëª…ì„¸)
   - Input (ì‚¬ìš©ì ì…ë ¥)
   - Process (ì²˜ë¦¬ ê³¼ì •)
   - Output (ì˜ˆìƒ ê²°ê³¼)
   - Example (êµ¬ì²´ì  ì˜ˆì‹œ: Before â†’ Action â†’ After)

3. **Technical Requirements** (ê¸°ìˆ  ìš”êµ¬ì‚¬í•­)
   - Data Model (TypeScript types)
   - API Changes
   - UI Components

4. **Implementation Checklist** â­ (êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸)
   - Phase 1: Planning (Planner)
   - Phase 2: Test (Test Team via Worker)
   - Phase 3: Implementation (Feature Team via Worker)
   - Phase 4: Integration (Worker)
   - Phase 5: Quality (Manager)

5. **Reference Documents** â­ (ì°¸ê³  ë¬¸ì„œ)
   - Memory Home (ê³¼ê±° íŒ¨í„´)
   - Worker Home (ì½”ë“œ ì»¨ë²¤ì…˜)
   - Test Team (í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ)
   - Feature Team (êµ¬í˜„ ê°€ì´ë“œ)
   - .cursorrules (í”„ë¡œì íŠ¸ ê·œì¹™)
   - TDD Guide (TDD ë°©ë²•ë¡ )

6. **Edge Cases & Constraints** (ì—£ì§€ ì¼€ì´ìŠ¤ & ì œì•½ì‚¬í•­)
   - ì²˜ë¦¬í•  ì—£ì§€ ì¼€ì´ìŠ¤ ëª©ë¡
   - ì„±ëŠ¥, ë°ì´í„° ë¬´ê²°ì„±, UI/UX ì œì•½

7. **Issue Handling Protocol** â­ (ì´ìŠˆ ì²˜ë¦¬ í”„ë¡œí† ì½œ)
   - During Planning (ê³„íš ì¤‘)
   - During Implementation (êµ¬í˜„ ì¤‘)
   - During Review (ê²€í†  ì¤‘)
   - Critical Blockers (ì¹˜ëª…ì  ì¥ì• ë¬¼ â†’ King ì—ìŠ¤ì»¬ë ˆì´ì…˜)

8. **Success Criteria** (ì„±ê³µ ê¸°ì¤€)
   - Functional Requirements
   - Non-Functional Requirements
   - Quality Requirements
   - Documentation Requirements

---

## ğŸ“ êµ¬ì²´ì ì¸ ì˜ˆì‹œ: "ë°˜ë³µ ì¼ì • ì¼ê´„ ìˆ˜ì •"

ì‚¬ìš©ìê°€ ìš”ì²­í•œ **"'í•´ë‹¹ ì¼ì •ë§Œ ìˆ˜ì •í•˜ì‹œê² ì–´ìš”?' â†’ 'ì•„ë‹ˆì˜¤' í´ë¦­ â†’ ì „ì²´ ìˆ˜ì •"** ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì™„ì „í•œ PRDë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

### Input â†’ Output ëª…ì„¸ (í•µì‹¬!)

```markdown
## Before (ë³€ê²½ ì „):
ìº˜ë¦°ë”ì— ë§¤ì£¼ ì›”ìš”ì¼ 10:00-11:00 "íŒ€ ìŠ¤íƒ ë“œì—…" ë°˜ë³µ ì¼ì •ì´ í‘œì‹œë¨
- 2024-11-04 (ì›”) 10:00-11:00 íŒ€ ìŠ¤íƒ ë“œì—… ğŸ”
- 2024-11-11 (ì›”) 10:00-11:00 íŒ€ ìŠ¤íƒ ë“œì—… ğŸ”
- 2024-11-18 (ì›”) 10:00-11:00 íŒ€ ìŠ¤íƒ ë“œì—… ğŸ”
- ... (continues until 2025-12-31)

## User Action (ì‚¬ìš©ì í–‰ë™):
1. ì‚¬ìš©ìê°€ 2024-11-11ì˜ "íŒ€ ìŠ¤íƒ ë“œì—…"ì„ í´ë¦­
2. "ìˆ˜ì •" ë²„íŠ¼ í´ë¦­
3. ëª¨ë‹¬ í‘œì‹œ: "í•´ë‹¹ ì¼ì •ë§Œ ìˆ˜ì •í•˜ì‹œê² ì–´ìš”?"
4. ì‚¬ìš©ìê°€ "ì•„ë‹ˆì˜¤" ë²„íŠ¼ í´ë¦­ (ì „ì²´ ìˆ˜ì • ëª¨ë“œ)
5. ì‹œê°„ì„ 10:00-11:00 â†’ 09:30-10:30ìœ¼ë¡œ ë³€ê²½
6. ì œëª©ì„ "íŒ€ ìŠ¤íƒ ë“œì—…" â†’ "íŒ€ ë°ì¼ë¦¬ ë¯¸íŒ…"ìœ¼ë¡œ ë³€ê²½
7. "ì €ì¥" ë²„íŠ¼ í´ë¦­

## After (ë³€ê²½ í›„):
ìº˜ë¦°ë”ì˜ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ì—…ë°ì´íŠ¸ë¨
- 2024-11-04 (ì›”) 09:30-10:30 íŒ€ ë°ì¼ë¦¬ ë¯¸íŒ… ğŸ”  âœ…
- 2024-11-11 (ì›”) 09:30-10:30 íŒ€ ë°ì¼ë¦¬ ë¯¸íŒ… ğŸ”  âœ…
- 2024-11-18 (ì›”) 09:30-10:30 íŒ€ ë°ì¼ë¦¬ ë¯¸íŒ… ğŸ”  âœ…
- ... (ëª¨ë“  ë¯¸ë˜ ì¸ìŠ¤í„´ìŠ¤ë„ ë™ì¼í•˜ê²Œ ë³€ê²½ë¨)

ì•Œë¦¼ í‘œì‹œ: "ì¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤."
ë°˜ë³µ ì•„ì´ì½˜ ğŸ” ìœ ì§€ë¨
```

### ë°ì´í„° ë³€í™” (Before/After ì½”ë“œ í¬í•¨)

```typescript
// Before
events: [
  {
    id: "recurring-1-2024-11-01",
    title: "ì£¼ê°„ íšŒì˜",
    startTime: "10:00",
    endTime: "11:00",
    repeat: { type: "weekly", interval: 1 },
    originalId: "recurring-1"
  },
  // ... more instances
]

// After (user changed time to 14:00-15:00)
events: [
  {
    id: "recurring-1-2024-11-01",
    title: "ì£¼ê°„ íšŒì˜",
    startTime: "14:00",  // âœ… Changed
    endTime: "15:00",    // âœ… Changed
    repeat: { type: "weekly", interval: 1 },  // âœ… Maintained
    originalId: "recurring-1"  // âœ… Preserved
  },
  // ... all instances updated
]
```

---

## ğŸ” êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸ (5ë‹¨ê³„)

### Phase 1: Planning (Planner)
- [ ] Review Memory for similar bulk operations
- [ ] Break down into TDD cycles (Cycle 1~4)
- [ ] Identify test cases (normal, edge, error)

### Phase 2: Test (Test Team via Worker)
- [ ] Unit Test: `updateRecurringEventInstances.spec.ts`
- [ ] Integration Test: `useEventOperations.spec.ts` (extend)
- [ ] Component Test: Modal "ì•„ë‹ˆì˜¤" button interaction
- [ ] Verify Red phase (tests failing)

### Phase 3: Implementation (Feature Team via Worker)
- [ ] Create Utility: `updateRecurringEventInstances()`
- [ ] Update Hook: `useEventOperations` with `editMode`
- [ ] Update UI: Modal with "ì˜ˆ"/"ì•„ë‹ˆì˜¤" buttons
- [ ] Verify Green phase (tests passing)

### Phase 4: Integration (Worker)
- [ ] Integrate utility â†’ hook â†’ UI
- [ ] Test end-to-end flow
- [ ] Refactor if needed (keep tests green)

### Phase 5: Quality (Manager)
- [ ] Code review
- [ ] Verify naming conventions
- [ ] Check test coverage > 80%
- [ ] Validate against PRD

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ (ì„¸ë¶€ ì§€ì¹¨)

ê° ë‹¨ê³„ì—ì„œ ì°¸ê³ í•´ì•¼ í•  êµ¬ì²´ì ì¸ ë¬¸ì„œì™€ ì„¹ì…˜:

### Code Patterns
- **Memory Home** (`memoryHome.md`)
  - Section: "Recurring Events Implementation" (lines 400-800)
  - Pattern: How to generate recurring event instances
  - Bug Fix: Avoid creating duplicates (see history 1028_16)

### Testing
- **Test Team** (`company/test-team.md`)
  - Unit Test: AAA pattern
  - Integration Test: `renderHook()` + `act()`
  - Component Test: `render()` + `fireEvent()`

### Implementation
- **Feature Team** (`company/feature-team.md`)
  - Function Creation: 6-step process
  - Naming: camelCase + intuitive Korean

### Rules
- **.cursorrules**
  - TypeScript mandatory
  - Function naming conventions

---

## ğŸš¨ ì´ìŠˆ ì²˜ë¦¬ í”„ë¡œí† ì½œ (êµ¬ì²´ì ì¸ ì‹œë‚˜ë¦¬ì˜¤)

### Scenario 1: ê³„íš ì¤‘ - ìš”êµ¬ì‚¬í•­ ë¶ˆëª…í™•

**Issue**: "Bulk edit should affect singularized instances?"
<!-- ì¼ê´„ ìˆ˜ì •ì´ ë‹¨ì¼ ì¼ì •ìœ¼ë¡œ ë³€í™˜ëœ ì¸ìŠ¤í„´ìŠ¤ì—ë„ ì˜í–¥ì„ ì£¼ì–´ì•¼ í•˜ëŠ”ê°€? -->

**Resolution**:
1. Planner checks Memory for past decisions
2. No precedent â†’ Escalate to King with options:
   - Option A: Affect all instances (including singularized)
   - Option B: Only affect recurring instances
3. King decides: Option B
4. Planner updates PRD
5. Planner informs Worker

---

### Scenario 2: êµ¬í˜„ ì¤‘ - í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

**Issue**: "Bulk edit removes repeat field"
<!-- ì¼ê´„ ìˆ˜ì •ì´ repeat í•„ë“œë¥¼ ì œê±°í•¨ -->

**Resolution**:
1. Worker reviews test with Test Team â†’ Test is correct
2. Worker reviews implementation with Feature Team
3. Feature Team finds bug:
```typescript
// âŒ Bug
return { ...instance, ...updates };  // overwrites repeat!

// âœ… Fix
return { 
  ...instance, 
  ...updates, 
  repeat: instance.repeat  // preserve explicitly
};
```
4. Worker fixes, tests pass
5. Document in `memoryHome.md`: "Object spread can overwrite nested fields"

---

### Scenario 3: ê²€í†  ì¤‘ - í’ˆì§ˆ ê¸°ì¤€ ë¯¸ì¶©ì¡±

**Issue**: "Function name not intuitive in Korean"
<!-- í•¨ìˆ˜ ì´ë¦„ì´ í•œêµ­ì–´ë¡œ ì§ê´€ì ì´ì§€ ì•ŠìŒ -->

**Resolution**:
1. Manager: `bulkUpdateEvents` â†’ "bulk update events"ëŠ” ì–´ìƒ‰
2. Manager provides feedback to Worker
3. Worker delegates to Feature Team
4. Feature Team suggests: `updateRecurringEventInstances` â†’ "ë°˜ë³µ ì¼ì • ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤" âœ…
5. Worker refactors (rename + update usages)
6. Tests still pass
7. Manager approves

---

### Scenario 4: ì¹˜ëª…ì  ì¥ì• ë¬¼ - King ì—ìŠ¤ì»¬ë ˆì´ì…˜

**Issue**: "1000+ instances take 5+ seconds (too slow)"

**Escalation Path**: Worker â†’ Planner â†’ King

**King Decisions**:
- Option A: Proceed with limitation (warn if > 100 instances)
- Option B: Delay feature for backend optimization
- Option C: Implement client-side pagination

---

## âœ… ì„±ê³µ ê¸°ì¤€

### Functional (ê¸°ëŠ¥)
- [ ] "ì•„ë‹ˆì˜¤" í´ë¦­ â†’ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ ì—…ë°ì´íŠ¸
- [ ] ë°˜ë³µ ì•„ì´ì½˜ ğŸ” ìœ ì§€
- [ ] `repeat` í•„ë“œ ë³´ì¡´
- [ ] `originalId` ìœ ì§€

### Quality (í’ˆì§ˆ)
- [ ] Test coverage > 80%
- [ ] Function names intuitive in Korean
- [ ] No `any` types
- [ ] JSDoc comments

### Documentation (ë¬¸ì„œ)
- [ ] Code comments explain "why"
- [ ] Edge cases documented
- [ ] Patterns added to `memoryHome.md`

---

## ğŸ“ PRDì˜ ê°€ì¹˜

ì´ PRD í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ë©´:

1. **King**: í•œ ë¬¸ì¥ ("ì•„ë‹ˆì˜¤ í´ë¦­ ì‹œ ì „ì²´ ìˆ˜ì •")ë§Œ ì£¼ë©´ ë¨
2. **Planner**: PRDë¥¼ ì±„ì›Œì„œ ìƒì„¸ ê³„íš ìƒì„±
3. **Worker**: PRDë¥¼ ë³´ê³  ì •í™•íˆ ë¬´ì—‡ì„ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ì§€ ì´í•´
4. **Test Team**: Input â†’ Outputì„ ë³´ê³  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±
5. **Feature Team**: ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë”°ë¼ êµ¬í˜„
6. **Manager**: PRD ëŒ€ë¹„ ê²€ì¦

**ê²°ê³¼**: ëª¨í˜¸í•¨ ì—†ì´, ì²´ê³„ì ìœ¼ë¡œ, ê²€ì¦ ê°€ëŠ¥í•˜ê²Œ ê¸°ëŠ¥ ê°œë°œ! ğŸ‰

---

## ğŸ“‚ íŒŒì¼ ìœ„ì¹˜

**ìƒì„±ëœ íŒŒì¼**: `src/.cursor/agents/prd.md`

**êµ¬ì¡°**:
- Part 1: PRD Template (how to write PRD)
- Part 2: Concrete Example (ë°˜ë³µ ì¼ì • ì¼ê´„ ìˆ˜ì •)
- Part 3: Issue Handling with real scenarios

ì´ì œ Kingì´ ê°„ë‹¨í•œ ìš”êµ¬ì‚¬í•­ë§Œ ì£¼ë©´, Plannerê°€ ì´ í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ì—¬ ì™„ì „í•œ PRDë¥¼ ì‘ì„±í•˜ê³ , ì „ì²´ íŒ€ì´ ê°™ì€ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤! ğŸš€

